// all the state management is done here